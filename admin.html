<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin - IMOB Racing</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-firestore.js"></script>
    <script src="config.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            firebase.initializeApp(CONFIG.FIREBASE_CONFIG);
            const db = firebase.firestore();

            async function loadProducts() {
                try {
                    const productsSnapshot = await db.collection('store-items').get();
                    const adminGrid = document.getElementById('admin-grid');
                    adminGrid.innerHTML = '';

                    productsSnapshot.forEach((doc) => {
                        const product = doc.data();
                        adminGrid.innerHTML += `
                            <div class="admin-item">
                                <h3>${product.name}</h3>
                                <p>${product.description}</p>
                                <p>Price: ${product.price}</p>
                                <button class="delete-button" data-product-id="${doc.id}">Delete</button>
                            </div>
                        `;
                    });

                    document.querySelectorAll('.delete-button').forEach(button => {
                        button.addEventListener('click', function () {
                            const productId = this.dataset.productId;
                            deleteProduct(productId);
                        });
                    });
                } catch (error) {
                    console.error('Error loading products:', error);
                }
            }

            async function deleteProduct(productId) {
                try {
                    await db.collection('store-items').doc(productId).delete();
                    console.log('Product deleted successfully');
                    alert('Product deleted successfully');
                    loadProducts(); // Refresh the product list
                } catch (error) {
                    console.error('Error deleting product:', error);
                    alert('Error deleting product: ' + error.message);
                }
            }

            loadProducts();
        });
    </script>
</head>
<body>
    <h1>Admin Panel</h1>
    <div id="admin-grid" class="admin-grid">
        <!-- Products will be dynamically added here -->
    </div>
</body>
</html>
